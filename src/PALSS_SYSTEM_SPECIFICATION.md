# PALSS SYSTEM ä»•æ§˜æ›¸ v1.0

**SNSä»£è¡Œä¼šç¤¾å‘ã‘SaaSãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰UI**

---

## ğŸ“‹ ç›®æ¬¡

1. [ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦](#ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦)
2. [æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯](#æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯)
3. [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](#ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)
4. [æ©Ÿèƒ½ä¸€è¦§](#æ©Ÿèƒ½ä¸€è¦§)
5. [ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«](#ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«)
6. [UI/UXãƒ‡ã‚¶ã‚¤ãƒ³](#uiuxãƒ‡ã‚¶ã‚¤ãƒ³)
7. [Phaseå®Ÿè£…çŠ¶æ³](#phaseå®Ÿè£…çŠ¶æ³)
8. [APIä»•æ§˜](#apiä»•æ§˜)
9. [ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ»é‹ç”¨](#ãƒ‡ãƒ—ãƒ­ã‚¤é‹ç”¨)
10. [ä»Šå¾Œã®äºˆå®š](#ä»Šå¾Œã®äºˆå®š)

---

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå
**PALSS SYSTEM** (Project & Analytics for Life-Social-Service System)

### ç›®çš„
SNSä»£è¡Œä¼šç¤¾å‘ã‘ã«ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç®¡ç†ãƒ»ã‚¿ã‚¹ã‚¯ç®¡ç†ãƒ»æ‰¿èªãƒ•ãƒ­ãƒ¼ãƒ»KPIåˆ†æã‚’çµ±åˆã—ãŸSaaSãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’æä¾›ã™ã‚‹ã€‚

### ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼
- SNSä»£è¡Œä¼šç¤¾ã®ãƒ‡ã‚£ãƒ¬ã‚¯ã‚¿ãƒ¼
- SNSä»£è¡Œä¼šç¤¾ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼
- ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä¼æ¥­ã®æ‹…å½“è€…ï¼ˆæ‰¿èªè€…ï¼‰

### ä¸»è¦æ©Ÿèƒ½
1. **ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç®¡ç†** - é¡§å®¢æƒ…å ±ãƒ»å¥‘ç´„ãƒ»ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†
2. **ã‚¿ã‚¹ã‚¯ç®¡ç†** - ã‚«ãƒ³ãƒãƒ³ãƒ»ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ»ã‚¬ãƒ³ãƒˆãƒãƒ£ãƒ¼ãƒˆ
3. **æ‰¿èªãƒ•ãƒ­ãƒ¼** - ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æ‰¿èªãƒ»å·®ã—æˆ»ã—ç®¡ç†
4. **KPIåˆ†æ** - Direction KPIï¼ˆç´æœŸéµå®ˆç‡ãƒ»å·®ã—æˆ»ã—ç‡ãƒ»ãƒªãƒ¼ãƒ‰ã‚¿ã‚¤ãƒ ï¼‰
5. **Sales KPI** - å—æ³¨é‡‘é¡ãƒ»å—æ³¨ä»¶æ•°ãƒ»ææ¡ˆä»¶æ•°ãƒ»å—æ³¨ç‡
6. **é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ ** - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šçŸ¥ãƒ»æœŸé™ã‚¢ãƒ©ãƒ¼ãƒˆ
7. **OutboxåŒæœŸ** - ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œãƒ»ç«¶åˆè§£æ±º

---

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- **React 18** - UIãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- **TypeScript** - å‹å®‰å…¨æ€§
- **Tailwind CSS v4.0** - ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°
- **Lucide React** - ã‚¢ã‚¤ã‚³ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- **Recharts** - ã‚°ãƒ©ãƒ•ãƒ»ãƒãƒ£ãƒ¼ãƒˆ

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
- **Supabase** - BaaS (Backend as a Service)
  - PostgreSQL ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
  - Row Level Security (RLS)
  - Realtime Subscriptions
  - Authentication

### çŠ¶æ…‹ç®¡ç†
- **LocalStorage** - ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã‚­ãƒ£ãƒƒã‚·ãƒ¥
- **Repository Pattern** - ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹æŠ½è±¡åŒ–
- **Outbox Pattern** - æ›¸ãè¾¼ã¿åŒæœŸ

### ãƒ‡ãƒ—ãƒ­ã‚¤
- **Figma Make** - ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ï¼ˆé–‹ç™ºç’°å¢ƒï¼‰
- **Vercel / Netlify** - æœ¬ç•ªç’°å¢ƒå€™è£œ

---

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆå›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     PALSS SYSTEM UI                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ Direction â”‚  â”‚   Sales   â”‚  â”‚  Clients  â”‚              â”‚
â”‚  â”‚   Board   â”‚  â”‚   Board   â”‚  â”‚   Board   â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Repository Layer                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ MockRepository   â”‚ â†â”€â”€â”€â”€â†’  â”‚ SupabaseRepositoryâ”‚        â”‚
â”‚  â”‚ (LocalStorage)   â”‚  åˆ‡æ›¿   â”‚ (Supabase Client) â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Data Sync Layer                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   Outbox Queue   â”‚ â†â”€â”€â”€â”€â†’  â”‚   AutoPull       â”‚         â”‚
â”‚  â”‚ (Write Buffering)â”‚         â”‚ (Incremental Pull)â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Supabase Backend                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚   PostgreSQL     â”‚  â”‚   RLS Policies   â”‚               â”‚
â”‚  â”‚   Database       â”‚  â”‚   (org_id filter)â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

#### Readï¼ˆèª­ã¿å–ã‚Šï¼‰
1. **åˆå›**: Full Pullï¼ˆå…¨ä»¶å–å¾—ï¼‰â†’ LocalStorageã‚­ãƒ£ãƒƒã‚·ãƒ¥
2. **2å›ç›®ä»¥é™**: Incremental Pullï¼ˆå·®åˆ†å–å¾—ï¼‰â†’ ãƒãƒ¼ã‚¸
3. **UI**: LocalStorageã‹ã‚‰èª­ã¿å–ã‚Šï¼ˆé«˜é€Ÿè¡¨ç¤ºï¼‰

#### Writeï¼ˆæ›¸ãè¾¼ã¿ï¼‰
1. **ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ**: UI â†’ Repository Writeé–¢æ•°
2. **Outboxç™»éŒ²**: Outbox Queueã«è¿½åŠ 
3. **LocalStorageå³åæ˜ **: æ¥½è¦³çš„UIæ›´æ–°
4. **Supabaseé€ä¿¡**: ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰åŒæœŸ
5. **æˆåŠŸ**: Outboxå‰Šé™¤
6. **å¤±æ•—**: ãƒªãƒˆãƒ©ã‚¤ or ã‚¨ãƒ©ãƒ¼è¡¨ç¤º

### RLSï¼ˆRow Level Securityï¼‰

```sql
-- çµ„ç¹”åˆ¥ãƒ‡ãƒ¼ã‚¿åˆ†é›¢
CREATE POLICY "org_isolation" ON clients
  FOR ALL USING (org_id = auth.jwt() ->> 'org_id');

-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯è‡ªç¤¾ãƒ‡ãƒ¼ã‚¿ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
CREATE POLICY "user_org_access" ON tasks
  FOR ALL USING (
    client_id IN (
      SELECT id FROM clients WHERE org_id = auth.jwt() ->> 'org_id'
    )
  );
```

---

## æ©Ÿèƒ½ä¸€è¦§

### 1. Direction Boardï¼ˆãƒ‡ã‚£ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç†ï¼‰

#### ã‚¿ã‚¹ã‚¯ãƒœãƒ¼ãƒ‰ï¼ˆã‚«ãƒ³ãƒãƒ³å½¢å¼ï¼‰
- **åˆ—**: æœªç€æ‰‹ / é€²è¡Œä¸­ / ãƒ¬ãƒ“ãƒ¥ãƒ¼å¾…ã¡ / å®Œäº†
- **ã‚«ãƒ¼ãƒ‰æƒ…å ±**: ã‚¿ã‚¹ã‚¯åã€æ‹…å½“è€…ã€æœŸé™ã€ãƒ©ãƒ™ãƒ«ã€å„ªå…ˆåº¦
- **ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—**: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å¤‰æ›´
- **ãƒ•ã‚£ãƒ«ã‚¿**: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã€æ‹…å½“è€…ã€æœŸé™ã€ãƒ©ãƒ™ãƒ«
- **æ¤œç´¢**: ã‚¿ã‚¹ã‚¯åã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå

#### ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼
- **æœˆè¡¨ç¤º**: ã‚¿ã‚¹ã‚¯æœŸé™ã‚’æ—¥ä»˜åˆ¥ã«è¡¨ç¤º
- **é€±è¡¨ç¤º**: é€±å˜ä½ã®ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³
- **æ—¥è¡¨ç¤º**: 1æ—¥ã®ã‚¿ã‚¹ã‚¯è©³ç´°
- **ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—**: æœŸé™å¤‰æ›´
- **è‰²åˆ†ã‘**: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆåˆ¥ã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹åˆ¥

#### ã‚¬ãƒ³ãƒˆãƒãƒ£ãƒ¼ãƒˆ
- **ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
- **ä¾å­˜é–¢ä¿‚**: ã‚¿ã‚¹ã‚¯é–“ã®ä¾å­˜é–¢ä¿‚è¡¨ç¤º
- **ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³**: é‡è¦ãªæœŸé™è¡¨ç¤º
- **é€²æ—ãƒãƒ¼**: ã‚¿ã‚¹ã‚¯é€²æ—ç‡

#### æ‰¿èªã‚»ãƒ³ã‚¿ãƒ¼
- **æ‰¿èªå¾…ã¡ãƒªã‚¹ãƒˆ**: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæ‰¿èªå¾…ã¡ã‚³ãƒ³ãƒ†ãƒ³ãƒ„
- **ç¨®é¡**: å‹•ç”»ã€ç”»åƒã€ã‚³ãƒ”ãƒ¼
- **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: æ‰¿èªå¾…ã¡ã€ç·Šæ€¥ã€æœŸé™è¶…é
- **ã‚¢ã‚¯ã‚·ãƒ§ãƒ³**: æ‰¿èªã€å·®ã—æˆ»ã—ã€ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
- **å·®ã—æˆ»ã—å›æ•°**: å±¥æ­´è¡¨ç¤º

#### KPIãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
- **ç´æœŸéµå®ˆç‡**: æœŸé™å†…å®Œäº†ã‚¿ã‚¹ã‚¯ç‡
- **å·®ã—æˆ»ã—ç‡**: æ‰¿èªå·®ã—æˆ»ã—ç‡
- **å¹³å‡ãƒªãƒ¼ãƒ‰ã‚¿ã‚¤ãƒ **: ã‚¿ã‚¹ã‚¯å®Œäº†ã¾ã§ã®å¹³å‡æ™‚é–“
- **KPIå®šç¾©åˆ‡æ›¿**: å®šç¾©A/å®šç¾©Bï¼ˆQAãƒ‘ãƒãƒ«ï¼‰
- **æœŸé™åŸºæº–åˆ‡æ›¿**: ã‚¿ã‚¹ã‚¯æœŸé™/æ‰¿èªæœŸé™
- **é›†è¨ˆæœŸé–“**: ä»Šæœˆ/å…ˆæœˆ/éå»3ãƒ¶æœˆ/éå»6ãƒ¶æœˆ/ä»Šå¹´

---

### 2. Sales Boardï¼ˆå–¶æ¥­ç®¡ç†ï¼‰

#### å—æ³¨ç®¡ç†
- **å—æ³¨é‡‘é¡**: æœˆæ¬¡ãƒ»å››åŠæœŸãƒ»å¹´æ¬¡
- **å—æ³¨ä»¶æ•°**: æ–°è¦å¥‘ç´„æ•°
- **ææ¡ˆä»¶æ•°**: ææ¡ˆä¸­ã®æ¡ˆä»¶æ•°
- **å—æ³¨ç‡**: å—æ³¨ä»¶æ•° / ææ¡ˆä»¶æ•°

#### å¥‘ç´„ç®¡ç†
- **å¥‘ç´„ä¸€è¦§**: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆåˆ¥å¥‘ç´„çŠ¶æ…‹
- **å¥‘ç´„é‡‘é¡**: æœˆé¡ã€å¹´é¡
- **å¥‘ç´„æœŸé–“**: é–‹å§‹æ—¥ã€çµ‚äº†æ—¥ã€æ›´æ–°æ—¥
- **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã€ä¿ç•™ã€çµ‚äº†

#### å£²ä¸Šäºˆæ¸¬
- **æœˆæ¬¡äºˆæ¸¬**: æ¬¡æœˆã®å£²ä¸Šäºˆæ¸¬
- **å››åŠæœŸäºˆæ¸¬**: æ¬¡å››åŠæœŸã®å£²ä¸Šäºˆæ¸¬
- **ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æ**: éå»ã®å£²ä¸Šæ¨ç§»

---

### 3. Clients Boardï¼ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç®¡ç†ï¼‰

#### ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒªã‚¹ãƒˆ
- **åŸºæœ¬æƒ…å ±**: ä¼æ¥­åã€æ‹…å½“è€…ã€é€£çµ¡å…ˆ
- **å¥‘ç´„çŠ¶æ…‹**: ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã€ä¿ç•™ã€çµ‚äº†
- **ã‚¿ã‚¹ã‚¯æ•°**: é€²è¡Œä¸­ã‚¿ã‚¹ã‚¯æ•°
- **æ‰¿èªå¾…ã¡æ•°**: æ‰¿èªå¾…ã¡ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æ•°

#### ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆè©³ç´°
- **ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«**: ä¼æ¥­æƒ…å ±ã€æ‹…å½“è€…æƒ…å ±
- **å¥‘ç´„æƒ…å ±**: å¥‘ç´„ãƒ—ãƒ©ãƒ³ã€é‡‘é¡ã€æœŸé–“
- **ã‚¿ã‚¹ã‚¯ä¸€è¦§**: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆåˆ¥ã‚¿ã‚¹ã‚¯
- **æ‰¿èªå±¥æ­´**: æ‰¿èªãƒ»å·®ã—æˆ»ã—å±¥æ­´
- **ã‚³ãƒ¡ãƒ³ãƒˆå±¥æ­´**: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨ã®ã‚„ã‚Šå–ã‚Š

---

### 4. é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ 

#### é€šçŸ¥ç¨®åˆ¥
- **ã‚¿ã‚¹ã‚¯æœŸé™**: æœŸé™1æ—¥å‰ã€å½“æ—¥ã€è¶…é
- **æ‰¿èªä¾é ¼**: æ–°è¦æ‰¿èªä¾é ¼
- **æ‰¿èªå®Œäº†**: æ‰¿èªå®Œäº†é€šçŸ¥
- **å·®ã—æˆ»ã—**: å·®ã—æˆ»ã—é€šçŸ¥
- **ã‚³ãƒ¡ãƒ³ãƒˆ**: æ–°è¦ã‚³ãƒ¡ãƒ³ãƒˆ

#### é€šçŸ¥è¡¨ç¤º
- **ãƒ™ãƒ«ã‚¢ã‚¤ã‚³ãƒ³**: æœªèª­æ•°ãƒãƒƒã‚¸
- **é€šçŸ¥ãƒ‘ãƒãƒ«**: æœ€æ–°20ä»¶è¡¨ç¤º
- **æ—¢èª­ç®¡ç†**: å€‹åˆ¥æ—¢èª­ã€ä¸€æ‹¬æ—¢èª­
- **ãƒ•ã‚£ãƒ«ã‚¿**: å…¨ã¦ã€æœªèª­ã®ã¿

---

### 5. QAãƒ‘ãƒãƒ«ï¼ˆDEVå°‚ç”¨ï¼‰

**èµ·å‹•**: `Ctrl + Shift + D`

#### ã‚¿ãƒ–æ§‹æˆ
1. **Outbox**: é€ä¿¡å¾…ã¡ãƒ‡ãƒ¼ã‚¿ç¢ºèªãƒ»æ‰‹å‹•é€ä¿¡
2. **Sync**: ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ¼ãƒ‰åˆ‡æ›¿ï¼ˆMock/Supabaseï¼‰ã€autoPullè¨­å®š
3. **Performance**: autoPullå®Ÿè¡Œæ™‚é–“ãƒ»å–å¾—ä»¶æ•°è¨ˆæ¸¬
4. **KPI Test**: KPIãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ

#### Outboxã‚¿ãƒ–
- **Pending Queue**: é€ä¿¡å¾…ã¡ãƒ‡ãƒ¼ã‚¿ä¸€è¦§
- **æ‰‹å‹•é€ä¿¡**: å€‹åˆ¥é€ä¿¡ãƒ»ä¸€æ‹¬é€ä¿¡
- **ã‚¨ãƒ©ãƒ¼è¡¨ç¤º**: é€ä¿¡å¤±æ•—ãƒ‡ãƒ¼ã‚¿
- **å‰Šé™¤**: Outboxå‰Šé™¤

#### Syncã‚¿ãƒ–
- **ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ¼ãƒ‰**: Mock â†” Supabase åˆ‡æ›¿
- **autoPullæœ‰åŠ¹åŒ–**: ON/OFF
- **autoPullé–“éš”**: 30ç§’/60ç§’/120ç§’
- **æ‰‹å‹•Pull**: å³åº§ã«Pullå®Ÿè¡Œ
- **æœ€çµ‚Pullæ™‚åˆ»**: æœ€å¾Œã®PullæˆåŠŸæ™‚åˆ»

#### Performanceã‚¿ãƒ–
- **Total Duration**: autoPullåˆè¨ˆæ™‚é–“
- **Table Breakdown**: ãƒ†ãƒ¼ãƒ–ãƒ«åˆ¥å®Ÿè¡Œæ™‚é–“
- **Item Counts**: ãƒ†ãƒ¼ãƒ–ãƒ«åˆ¥å–å¾—ä»¶æ•°
- **Pull Type**: Full/Incrementalï¼ˆPhase 8.5ï¼‰

#### KPI Testã‚¿ãƒ–
- **KPIå®šç¾©åˆ‡æ›¿**: å®šç¾©Aï¼ˆå³æ ¼ï¼‰ / å®šç¾©Bï¼ˆç·©å’Œï¼‰
- **æœŸé™åŸºæº–åˆ‡æ›¿**: ã‚¿ã‚¹ã‚¯æœŸé™ / æ‰¿èªæœŸé™
- **é›†è¨ˆæœŸé–“åˆ‡æ›¿**: ä»Šæœˆ/å…ˆæœˆ/éå»3ãƒ¶æœˆ/éå»6ãƒ¶æœˆ/ä»Šå¹´
- **ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ**: KPIæ¤œè¨¼ç”¨ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ

---

## ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

### ãƒ†ãƒ¼ãƒ–ãƒ«ä¸€è¦§

```
clients          - ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæƒ…å ±
tasks            - ã‚¿ã‚¹ã‚¯æƒ…å ±
approvals        - æ‰¿èªæƒ…å ±
comments         - ã‚³ãƒ¡ãƒ³ãƒˆæƒ…å ±
contracts        - å¥‘ç´„æƒ…å ±
notifications    - é€šçŸ¥æƒ…å ±
users            - ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±
organizations    - çµ„ç¹”æƒ…å ±
```

### clientsï¼ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼‰

```typescript
interface Client {
  id: string;                    // UUID
  orgId: string;                 // çµ„ç¹”IDï¼ˆRLSç”¨ï¼‰
  name: string;                  // ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå
  industry: string;              // æ¥­ç¨®
  contactName: string;           // æ‹…å½“è€…å
  contactEmail: string;          // æ‹…å½“è€…ãƒ¡ãƒ¼ãƒ«
  contactPhone: string;          // æ‹…å½“è€…é›»è©±
  status: 'active' | 'paused' | 'inactive'; // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  createdAt: string;             // ä½œæˆæ—¥æ™‚ï¼ˆISO 8601ï¼‰
  updatedAt: string;             // æ›´æ–°æ—¥æ™‚ï¼ˆISO 8601ï¼‰
}
```

### tasksï¼ˆã‚¿ã‚¹ã‚¯ï¼‰

```typescript
interface Task {
  id: string;                    // UUID
  clientId: string;              // ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆID
  title: string;                 // ã‚¿ã‚¹ã‚¯å
  description: string;           // èª¬æ˜
  status: 'todo' | 'in_progress' | 'review' | 'done'; // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  priority: 'low' | 'medium' | 'high' | 'urgent'; // å„ªå…ˆåº¦
  assignee: string;              // æ‹…å½“è€…
  dueDate: string;               // æœŸé™ï¼ˆISO 8601ï¼‰
  labels: string[];              // ãƒ©ãƒ™ãƒ«
  platform: string;              // SNSãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ 
  createdAt: string;             // ä½œæˆæ—¥æ™‚ï¼ˆISO 8601ï¼‰
  updatedAt: string;             // æ›´æ–°æ—¥æ™‚ï¼ˆISO 8601ï¼‰
  completedAt?: string;          // å®Œäº†æ—¥æ™‚ï¼ˆISO 8601ï¼‰
}
```

### approvalsï¼ˆæ‰¿èªï¼‰

```typescript
interface Approval {
  id: string;                    // UUID
  clientId: string;              // ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆID
  taskId?: string;               // ã‚¿ã‚¹ã‚¯IDï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
  title: string;                 // æ‰¿èªã‚³ãƒ³ãƒ†ãƒ³ãƒ„å
  platform: string;              // SNSãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ 
  status: 'pending' | 'approved' | 'rejected'; // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  submittedBy: string;           // æå‡ºè€…
  submittedDate: string;         // æå‡ºæ—¥æ™‚ï¼ˆISO 8601ï¼‰
  deadline: string;              // æ‰¿èªæœŸé™ï¼ˆISO 8601ï¼‰
  approvedBy?: string;           // æ‰¿èªè€…
  approvedDate?: string;         // æ‰¿èªæ—¥æ™‚ï¼ˆISO 8601ï¼‰
  rejectedBy?: string;           // å·®ã—æˆ»ã—è€…
  rejectedDate?: string;         // å·®ã—æˆ»ã—æ—¥æ™‚ï¼ˆISO 8601ï¼‰
  rejectedReason?: string;       // å·®ã—æˆ»ã—ç†ç”±
  createdAt: string;             // ä½œæˆæ—¥æ™‚ï¼ˆISO 8601ï¼‰
  updatedAt: string;             // æ›´æ–°æ—¥æ™‚ï¼ˆISO 8601ï¼‰
}
```

### commentsï¼ˆã‚³ãƒ¡ãƒ³ãƒˆï¼‰

```typescript
interface Comment {
  id: string;                    // UUID
  clientId: string;              // ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆID
  taskId?: string;               // ã‚¿ã‚¹ã‚¯IDï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
  approvalId?: string;           // æ‰¿èªIDï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
  userId: string;                // ã‚³ãƒ¡ãƒ³ãƒˆæŠ•ç¨¿è€…ID
  userName: string;              // ã‚³ãƒ¡ãƒ³ãƒˆæŠ•ç¨¿è€…å
  content: string;               // ã‚³ãƒ¡ãƒ³ãƒˆå†…å®¹
  createdAt: string;             // ä½œæˆæ—¥æ™‚ï¼ˆISO 8601ï¼‰
}
```

### contractsï¼ˆå¥‘ç´„ï¼‰

```typescript
interface Contract {
  id: string;                    // UUID
  clientId: string;              // ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆID
  plan: string;                  // å¥‘ç´„ãƒ—ãƒ©ãƒ³
  monthlyAmount: number;         // æœˆé¡æ–™é‡‘
  startDate: string;             // å¥‘ç´„é–‹å§‹æ—¥ï¼ˆISO 8601ï¼‰
  endDate?: string;              // å¥‘ç´„çµ‚äº†æ—¥ï¼ˆISO 8601ï¼‰
  status: 'active' | 'paused' | 'cancelled'; // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  createdAt: string;             // ä½œæˆæ—¥æ™‚ï¼ˆISO 8601ï¼‰
  updatedAt: string;             // æ›´æ–°æ—¥æ™‚ï¼ˆISO 8601ï¼‰
}
```

### notificationsï¼ˆé€šçŸ¥ï¼‰

```typescript
interface Notification {
  id: string;                    // UUID
  userId: string;                // é€šçŸ¥å¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
  type: 'task_deadline' | 'approval_request' | 'approval_completed' | 'approval_rejected' | 'comment'; // é€šçŸ¥ç¨®åˆ¥
  title: string;                 // é€šçŸ¥ã‚¿ã‚¤ãƒˆãƒ«
  message: string;               // é€šçŸ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
  link?: string;                 // ãƒªãƒ³ã‚¯å…ˆï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
  isRead: boolean;               // æ—¢èª­ãƒ•ãƒ©ã‚°
  createdAt: string;             // ä½œæˆæ—¥æ™‚ï¼ˆISO 8601ï¼‰
}
```

---

## UI/UXãƒ‡ã‚¶ã‚¤ãƒ³

### ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ 

#### ãƒ†ãƒ¼ãƒ
- **PALSS MODE** - ãƒ¡ã‚¤ãƒ³ãƒ†ãƒ¼ãƒï¼ˆæ·¡ã„ç´«ãƒ™ãƒ¼ã‚¹ï¼‰
- **DARK** - ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ï¼ˆé»’ãƒ™ãƒ¼ã‚¹ï¼‰
- **FEMINE** - ãƒ•ã‚§ãƒŸãƒ‹ãƒ³ãƒ†ãƒ¼ãƒï¼ˆãƒ”ãƒ³ã‚¯ãƒ™ãƒ¼ã‚¹ï¼‰

#### ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆï¼ˆPALSS MODEï¼‰

```css
--background: 245 245 250;        /* #F5F5FA */
--foreground: 17 24 39;           /* #111827 */
--card: 255 255 255;              /* #FFFFFF */
--card-foreground: 17 24 39;      /* #111827 */
--primary: 139 92 246;            /* #8B5CF6 */
--primary-foreground: 255 255 255;/* #FFFFFF */
--muted: 243 244 246;             /* #F3F4F6 */
--muted-foreground: 107 114 128;  /* #6B7280 */
--accent: 249 250 251;            /* #F9FAFB */
--destructive: 239 68 68;         /* #EF4444 */
--border: 229 231 235;            /* #E5E7EB */
--success: 34 197 94;             /* #22C55E */
```

#### ã‚¿ã‚¤ãƒã‚°ãƒ©ãƒ•ã‚£

```css
/* /styles/globals.css ã§å®šç¾© */
h1 { font-size: 1.875rem; font-weight: 700; }
h2 { font-size: 1.5rem; font-weight: 600; }
h3 { font-size: 1.25rem; font-weight: 600; }
p  { font-size: 0.875rem; line-height: 1.5; }
```

#### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

- **Button**: 4ç¨®é¡ï¼ˆprimary, secondary, ghost, destructiveï¼‰
- **Card**: è§’ä¸¸12pxã€ãƒœãƒ¼ãƒ€ãƒ¼1pxã€å½±ãªã—
- **Input**: è§’ä¸¸8pxã€ãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ™‚ãƒªãƒ³ã‚°è¡¨ç¤º
- **Badge**: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤ºç”¨ï¼ˆè‰²åˆ†ã‘ï¼‰
- **Avatar**: å††å½¢ã€ã‚¤ãƒ‹ã‚·ãƒ£ãƒ«è¡¨ç¤º

### ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ

#### 2å±¤ã‚µã‚¤ãƒ‰ãƒãƒ¼æ§‹é€ 

```
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Icon â”‚ Context      â”‚                                â”‚
â”‚ Rail â”‚ Drawer       â”‚     Main Content Area          â”‚
â”‚ 64px â”‚ 240px        â”‚                                â”‚
â”‚      â”‚              â”‚                                â”‚
â”‚  ğŸ   â”‚ Direction    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  ğŸ“Š  â”‚ â”œ Tasks      â”‚  â”‚                          â”‚  â”‚
â”‚  ğŸ‘¥  â”‚ â”œ Calendar   â”‚  â”‚     Dashboard            â”‚  â”‚
â”‚  ğŸ””  â”‚ â”œ Gantt      â”‚  â”‚                          â”‚  â”‚
â”‚  âš™ï¸  â”‚ â”” Approvals  â”‚  â”‚                          â”‚  â”‚
â”‚      â”‚              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- **Icon Rail**: å›ºå®šå¹…64pxã€ä¸»è¦ã‚»ã‚¯ã‚·ãƒ§ãƒ³åˆ‡æ›¿
- **Context Drawer**: å¯å¤‰å¹…240pxã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³å†…ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼
- **Main Content**: æ®‹ã‚Šå…¨å¹…ã€ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯èƒ½

---

## Phaseå®Ÿè£…çŠ¶æ³

### âœ… Phase 1-9: å®Œäº†ï¼ˆ100%ï¼‰

| Phase | å†…å®¹ | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |
|-------|------|------------|
| Phase 1 | åŸºæœ¬UIãƒ»ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ | âœ… å®Œäº† |
| Phase 2 | Direction Boardï¼ˆã‚¿ã‚¹ã‚¯ãƒ»ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ»ã‚¬ãƒ³ãƒˆï¼‰ | âœ… å®Œäº† |
| Phase 3 | Sales Boardï¼ˆå—æ³¨ç®¡ç†ãƒ»KPIï¼‰ | âœ… å®Œäº† |
| Phase 4 | Clients Boardï¼ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç®¡ç†ï¼‰ | âœ… å®Œäº† |
| Phase 5 | é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ  | âœ… å®Œäº† |
| Phase 6 | ãƒ†ãƒ¼ãƒåˆ‡æ›¿ï¼ˆPALSS/DARK/FEMINEï¼‰ | âœ… å®Œäº† |
| Phase 7 | QAãƒ‘ãƒãƒ«ï¼ˆOutbox/Sync/KPI Testï¼‰ | âœ… å®Œäº† |
| Phase 8 | ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ï¼ˆDBã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãƒ»è¨ˆæ¸¬ï¼‰ | âœ… å®Œäº† |
| Phase 9 | RepositoryçµŒç”±ã¸ã®ç§»è¡Œï¼ˆRead/Writeçµ±åˆï¼‰ | âœ… å®Œäº† |

### ğŸ”§ Phase 8.5: Incremental Pullï¼ˆè¨­è¨ˆå®Œäº†ã€å®Ÿè£…æº–å‚™ä¸­ï¼‰

| ã‚¹ãƒ†ãƒƒãƒ— | å†…å®¹ | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |
|----------|------|------------|
| Step 1 | autoPullçŠ¶æ…‹ç®¡ç†ï¼ˆautoPullState.tsï¼‰ | âœ… å®Œäº† |
| Step 2 | Repository Interfaceæ‹¡å¼µ | âœ… å®Œäº† |
| Step 3 | SupabaseRepositoryå®Ÿè£… | ğŸ”§ æº–å‚™ä¸­ |
| Step 4 | autoPullå·®åˆ†å–å¾—å¯¾å¿œ | ğŸ”§ æº–å‚™ä¸­ |
| Step 5 | QAãƒ‘ãƒãƒ«DEVæ©Ÿèƒ½ | ğŸ”§ æº–å‚™ä¸­ |
| Step 6 | ãƒ†ã‚¹ãƒˆãƒ»æ¤œè¨¼ | ğŸ”§ æœªå®Ÿæ–½ |

**æƒ³å®šåŠ¹æœ**:
- å–å¾—ä»¶æ•°: 99.9%å‰Šæ¸›ï¼ˆ37,500ä»¶ â†’ 10-50ä»¶ï¼‰
- å®Ÿè¡Œæ™‚é–“: 97-98%çŸ­ç¸®ï¼ˆ2,000ms â†’ 50-200msï¼‰

---

## APIä»•æ§˜

### Repository Interface

#### ITaskRepository

```typescript
interface ITaskRepository {
  // Read
  getAllTasks(): Promise<Task[]>;
  getTaskById(id: string): Promise<Task | null>;
  getTasksByClientId(clientId: string): Promise<Task[]>;
  getTasksByStatus(status: string): Promise<Task[]>;
  getTasksIncremental(options?: IncrementalPullOptions): Promise<IncrementalPullResult<Task>>;
  
  // Write
  createTask(task: Omit<Task, 'id' | 'createdAt' | 'updatedAt'>): Promise<Task>;
  updateTask(id: string, updates: Partial<Task>): Promise<Task>;
  deleteTask(id: string): Promise<void>;
  
  // Bulk
  bulkCreateTasks(tasks: Omit<Task, 'id' | 'createdAt' | 'updatedAt'>[]): Promise<Task[]>;
}
```

#### IncrementalPullOptions

```typescript
interface IncrementalPullOptions {
  since?: string;  // updated_at or created_at ã®å¢ƒç•Œå€¤ï¼ˆISO 8601ï¼‰
  limit?: number;  // 1å›ã®å–å¾—ä¸Šé™
}

interface IncrementalPullResult<T> {
  items: T[];
  hasMore: boolean;           // ã¾ã å–å¾—ã™ã¹ããƒ‡ãƒ¼ã‚¿ãŒã‚ã‚‹ã‹
  latestTimestamp?: string;   // å–å¾—ã—ãŸä¸­ã§æœ€æ–°ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
}
```

### Outbox Pattern

#### Outbox Entry

```typescript
interface OutboxEntry {
  id: string;                 // UUID
  operation: 'create' | 'update' | 'delete';
  tableName: string;          // ãƒ†ãƒ¼ãƒ–ãƒ«å
  recordId: string;           // ãƒ¬ã‚³ãƒ¼ãƒ‰ID
  payload: any;               // ãƒ‡ãƒ¼ã‚¿ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰
  createdAt: string;          // ä½œæˆæ—¥æ™‚ï¼ˆISO 8601ï¼‰
  attempts: number;           // è©¦è¡Œå›æ•°
  lastError?: string;         // æœ€å¾Œã®ã‚¨ãƒ©ãƒ¼
}
```

#### Outbox Operations

```typescript
// Outboxè¿½åŠ 
function addToOutbox(entry: Omit<OutboxEntry, 'id' | 'createdAt' | 'attempts'>): void;

// Outboxé€ä¿¡
async function processOutbox(): Promise<void>;

// Outboxå‰Šé™¤
function removeFromOutbox(id: string): void;

// Outboxå…¨å‰Šé™¤
function clearOutbox(): void;

// Outboxå–å¾—
function getOutboxEntries(): OutboxEntry[];
```

---

## ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ»é‹ç”¨

### ç’°å¢ƒå¤‰æ•°

```bash
# Supabaseè¨­å®š
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_ANON_KEY=your-anon-key

# çµ„ç¹”IDï¼ˆé–‹ç™ºç”¨ï¼‰
VITE_ORG_ID=org_dev_001

# autoPullè¨­å®š
VITE_AUTOPULL_INTERVAL=60  # ç§’
```

### ãƒ“ãƒ«ãƒ‰

```bash
# é–‹ç™ºç’°å¢ƒ
npm run dev

# æœ¬ç•ªãƒ“ãƒ«ãƒ‰
npm run build

# ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
npm run preview
```

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç§»è¡Œ

```bash
# ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
supabase db push

# ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä½œæˆ
psql -f /supabase/indexes.sql
```

### ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°

- **Supabase Dashboard**: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä½¿ç”¨çŠ¶æ³
- **QAãƒ‘ãƒãƒ« Performance**: autoPullå®Ÿè¡Œæ™‚é–“
- **QAãƒ‘ãƒãƒ« Outbox**: é€ä¿¡å¤±æ•—ãƒ‡ãƒ¼ã‚¿
- **Browser Console**: ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°

---

## ä»Šå¾Œã®äºˆå®š

### Phase 8.5å®Œæˆï¼ˆå„ªå…ˆåº¦: â­â­â­ï¼‰
- [ ] SupabaseRepositoryå·®åˆ†å–å¾—ãƒ¡ã‚½ãƒƒãƒ‰å®Ÿè£…
- [ ] autoPullå·®åˆ†å–å¾—å¯¾å¿œ
- [ ] ãƒãƒ¼ã‚¸å‡¦ç†å®Ÿè£…
- [ ] QAãƒ‘ãƒãƒ«å¯è¦–åŒ–
- [ ] ãƒ†ã‚¹ãƒˆãƒ»æ¤œè¨¼

### Phase 10: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸï¼ˆå„ªå…ˆåº¦: â­â­ï¼‰
- [ ] Supabase Realtime Subscriptionsçµ±åˆ
- [ ] ä»–ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å¤‰æ›´ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åæ˜ 
- [ ] ç«¶åˆè§£æ±ºUI
- [ ] ã‚ªãƒ³ãƒ©ã‚¤ãƒ³/ã‚ªãƒ•ãƒ©ã‚¤ãƒ³çŠ¶æ…‹è¡¨ç¤º

### Phase 11: ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œï¼ˆå„ªå…ˆåº¦: â­â­ï¼‰
- [ ] ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³æœ€é©åŒ–
- [ ] ã‚¿ãƒƒãƒã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼å¯¾å¿œ
- [ ] ãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼
- [ ] PWAå¯¾å¿œï¼ˆã‚ªãƒ•ãƒ©ã‚¤ãƒ³å‹•ä½œï¼‰

### Phase 12: ãƒ¬ãƒãƒ¼ãƒˆæ©Ÿèƒ½ï¼ˆå„ªå…ˆåº¦: â­ï¼‰
- [ ] æœˆæ¬¡ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
- [ ] PDFå‡ºåŠ›
- [ ] ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆåˆ¥ãƒ¬ãƒãƒ¼ãƒˆ
- [ ] KPIãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æ

### Phase 13: æ¨©é™ç®¡ç†ï¼ˆå„ªå…ˆåº¦: â­ï¼‰
- [ ] ãƒ­ãƒ¼ãƒ«å®šç¾©ï¼ˆAdmin, Manager, Member, Clientï¼‰
- [ ] æ¨©é™åˆ¥UIè¡¨ç¤ºåˆ¶å¾¡
- [ ] RLSãƒãƒªã‚·ãƒ¼æ‹¡å¼µ
- [ ] æ“ä½œãƒ­ã‚°

---

## ä»˜éŒ²

### LocalStorageã‚­ãƒ¼ä¸€è¦§

```typescript
const STORAGE_KEYS = {
  CLIENTS: 'palss_clients',                    // Client[]
  CLIENT_TASKS: 'palss_client_tasks',          // Record<clientId, Task[]>
  CLIENT_APPROVALS: 'palss_client_approvals',  // Record<clientId, Approval[]>
  COMMENTS: 'palss_client_comments',           // Comment[]
  CONTRACTS: 'palss_contracts',                // Contract[]
  NOTIFICATIONS: 'palss_notifications',        // Notification[]
  CURRENT_USER: 'palss_current_user',          // AuthUser
  THEME: 'palss_theme',                        // 'palss' | 'dark' | 'femine'
  DATA_MODE: 'palss_data_mode',                // 'mock' | 'supabase'
  AUTOPULL_CONFIG: 'palss_autopull_config',    // AutoPullConfig
  AUTOPULL_STATE: 'palss_autopull_state_v1',   // AutoPullState
  OUTBOX: 'palss_outbox',                      // OutboxEntry[]
};
```

### QAãƒ‘ãƒãƒ«ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ

| ã‚­ãƒ¼ | æ©Ÿèƒ½ |
|------|------|
| `Ctrl + Shift + D` | QAãƒ‘ãƒãƒ«é–‹é–‰ |
| `Ctrl + Shift + M` | ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ¼ãƒ‰åˆ‡æ›¿ |
| `Ctrl + Shift + P` | æ‰‹å‹•autoPullå®Ÿè¡Œ |
| `Ctrl + Shift + O` | Outboxé€ä¿¡ |

### ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

#### Q1: autoPullãŒå‹•ä½œã—ãªã„
**ç¢ºèªäº‹é …**:
1. QAãƒ‘ãƒãƒ« > Sync > autoPullæœ‰åŠ¹åŒ–ãŒONã‹
2. ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ¼ãƒ‰ãŒSupabaseã‹
3. Supabaseèªè¨¼ãŒæˆåŠŸã—ã¦ã„ã‚‹ã‹
4. ãƒ–ãƒ©ã‚¦ã‚¶ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ã„ãªã„ã‹

#### Q2: ãƒ‡ãƒ¼ã‚¿ãŒä¿å­˜ã•ã‚Œãªã„
**ç¢ºèªäº‹é …**:
1. Outboxã‚¿ãƒ–ã§é€ä¿¡å¾…ã¡ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚‹ã‹
2. Supabaseæ¥ç¶šãŒæ­£å¸¸ã‹
3. RLSãƒãƒªã‚·ãƒ¼ã§ãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¦ã„ãªã„ã‹
4. org_idãŒæ­£ã—ã„ã‹

#### Q3: UIè¡¨ç¤ºãŒé…ã„
**ç¢ºèªäº‹é …**:
1. Performanceã‚¿ãƒ–ã§autoPullæ™‚é–“ã‚’ç¢ºèª
2. LocalStorageã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒã‚ã‚‹ã‹
3. ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯é€Ÿåº¦ã¯ååˆ†ã‹
4. Phase 8.5ï¼ˆIncremental Pullï¼‰å°å…¥ã‚’æ¤œè¨

#### Q4: KPIãŒæ­£ã—ãè¨ˆç®—ã•ã‚Œãªã„
**ç¢ºèªäº‹é …**:
1. QAãƒ‘ãƒãƒ« > KPI Test > KPIå®šç¾©ã‚’ç¢ºèª
2. æœŸé™åŸºæº–ï¼ˆã‚¿ã‚¹ã‚¯æœŸé™/æ‰¿èªæœŸé™ï¼‰ã‚’ç¢ºèª
3. é›†è¨ˆæœŸé–“ã‚’ç¢ºèª
4. ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ç”Ÿæˆã§å‹•ä½œç¢ºèª

---

## å¤‰æ›´å±¥æ­´

| æ—¥ä»˜ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | å¤‰æ›´å†…å®¹ |
|------|------------|----------|
| 2024-12-22 | v1.0 | åˆç‰ˆä½œæˆï¼ˆPhase 1-9å®Œäº†ã€Phase 8.5è¨­è¨ˆå®Œäº†ï¼‰ |

---

## å‚è€ƒè³‡æ–™

- [PHASE8.5_INCREMENTAL_PULL.md](./PHASE8.5_INCREMENTAL_PULL.md) - Incremental Pullè©³ç´°ä»•æ§˜
- [/supabase/indexes.sql](./supabase/indexes.sql) - DBã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹å®šç¾©
- [/repositories/interfaces.ts](./repositories/interfaces.ts) - Repository Interfaceå®šç¾©
- [/utils/autoPullState.ts](./utils/autoPullState.ts) - autoPullçŠ¶æ…‹ç®¡ç†
- [/styles/globals.css](./styles/globals.css) - ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚¿ã‚¤ãƒ«ãƒ»ãƒ†ãƒ¼ãƒå®šç¾©

---

**Document Version**: 1.0  
**Last Updated**: 2024-12-22  
**Status**: âœ… **Phase 1-9 å®Œäº†ã€Phase 8.5 è¨­è¨ˆå®Œäº†**

---

## ã¾ã¨ã‚

PALSS SYSTEMã¯ã€SNSä»£è¡Œä¼šç¤¾å‘ã‘ã«æœ€é©åŒ–ã•ã‚ŒãŸSaaSãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ã™ã€‚

**ä¸»è¦ãªç‰¹å¾´**:
1. âœ… **å®Œæˆåº¦ã®é«˜ã„UI**: Appleé¢¨ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã€3ãƒ†ãƒ¼ãƒå¯¾å¿œ
2. âœ… **å¼·åŠ›ãªKPIåˆ†æ**: Direction KPI + Sales KPIã€å‹•çš„è¨ˆç®—
3. âœ… **Supabaseçµ±åˆ**: RLSå¯¾å¿œã€Outbox Patternã€autoPull
4. âœ… **DEVå°‚ç”¨QAãƒ‘ãƒãƒ«**: ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ¼ãƒ‰åˆ‡æ›¿ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨ˆæ¸¬
5. ğŸ”§ **Incremental Pull**: 97-98%ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„ï¼ˆè¨­è¨ˆå®Œäº†ï¼‰

**æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³**:
- Phase 8.5å®Œæˆï¼ˆIncremental Pullå®Ÿè£…ï¼‰
- Phase 10: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸ
- Phase 11: ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ

PALSS SYSTEMã¯ç¶™ç¶šçš„ã«é€²åŒ–ã—ã€SNSä»£è¡Œä¼šç¤¾ã®æ¥­å‹™åŠ¹ç‡ã‚’æœ€å¤§åŒ–ã—ã¾ã™ï¼
