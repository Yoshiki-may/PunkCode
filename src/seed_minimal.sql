-- ============================================================================
-- PALSS SYSTEM — Minimal Seed Data (seed_minimal.sql)
-- Version: 1.0
-- Date: 2024-12-22
-- Purpose: 最小限のseedデータ（開発・テスト用）
-- ============================================================================

-- ============================================================================
-- 1. organizations（組織）
-- ============================================================================

INSERT INTO organizations (id, name, slug, created_at, updated_at) VALUES
('01234567-89ab-cdef-0123-456789abcdef', 'PALSS株式会社', 'palss', now(), now());

-- ============================================================================
-- 2. clients（クライアント）
-- ============================================================================

INSERT INTO clients (id, org_id, name, industry, contact_email, contact_phone, created_at, updated_at) VALUES
('c1111111-1111-1111-1111-111111111111', '01234567-89ab-cdef-0123-456789abcdef', '株式会社A（製造業）', '製造業', 'contact@company-a.com', '03-1234-5678', now(), now()),
('c2222222-2222-2222-2222-222222222222', '01234567-89ab-cdef-0123-456789abcdef', '株式会社B（IT）', 'IT', 'contact@company-b.com', '03-2345-6789', now(), now()),
('c3333333-3333-3333-3333-333333333333', '01234567-89ab-cdef-0123-456789abcdef', '株式会社C（小売）', '小売', 'contact@company-c.com', '03-3456-7890', now(), now()),
('c4444444-4444-4444-4444-444444444444', '01234567-89ab-cdef-0123-456789abcdef', '株式会社D（広告）', '広告', 'contact@company-d.com', '03-4567-8901', now(), now()),
('c5555555-5555-5555-5555-555555555555', '01234567-89ab-cdef-0123-456789abcdef', '株式会社E（教育）', '教育', 'contact@company-e.com', '03-5678-9012', now(), now());

-- ============================================================================
-- 3. users（ユーザー）
-- ============================================================================

-- 社内ユーザー（各ロール1名ずつ）
INSERT INTO users (id, auth_uid, email, name, role, org_id, client_id, created_at, updated_at) VALUES
-- Sales
('u1111111-1111-1111-1111-111111111111', 'a1111111-1111-1111-1111-111111111111', 'sales@palss.com', '営業太郎', 'sales', '01234567-89ab-cdef-0123-456789abcdef', NULL, now(), now()),
-- Direction
('u2222222-2222-2222-2222-222222222222', 'a2222222-2222-2222-2222-222222222222', 'direction@palss.com', 'ディレクション花子', 'direction', '01234567-89ab-cdef-0123-456789abcdef', NULL, now(), now()),
-- Editor
('u3333333-3333-3333-3333-333333333333', 'a3333333-3333-3333-3333-333333333333', 'editor@palss.com', 'エディター次郎', 'editor', '01234567-89ab-cdef-0123-456789abcdef', NULL, now(), now()),
-- Creator
('u4444444-4444-4444-4444-444444444444', 'a4444444-4444-4444-4444-444444444444', 'creator@palss.com', 'クリエイター三郎', 'creator', '01234567-89ab-cdef-0123-456789abcdef', NULL, now(), now()),
-- Support
('u5555555-5555-5555-5555-555555555555', 'a5555555-5555-5555-5555-555555555555', 'support@palss.com', 'サポート美咲', 'support', '01234567-89ab-cdef-0123-456789abcdef', NULL, now(), now()),
-- Control
('u6666666-6666-6666-6666-666666666666', 'a6666666-6666-6666-6666-666666666666', 'control@palss.com', '管理者健太', 'control', '01234567-89ab-cdef-0123-456789abcdef', NULL, now(), now());

-- Clientユーザー（各クライアント1名ずつ）
INSERT INTO users (id, auth_uid, email, name, role, org_id, client_id, created_at, updated_at) VALUES
-- Client A
('u7777777-7777-7777-7777-777777777777', 'a7777777-7777-7777-7777-777777777777', 'client-a@company-a.com', 'A社担当者', 'client', NULL, 'c1111111-1111-1111-1111-111111111111', now(), now()),
-- Client B
('u8888888-8888-8888-8888-888888888888', 'a8888888-8888-8888-8888-888888888888', 'client-b@company-b.com', 'B社担当者', 'client', NULL, 'c2222222-2222-2222-2222-222222222222', now(), now()),
-- Client C
('u9999999-9999-9999-9999-999999999999', 'a9999999-9999-9999-9999-999999999999', 'client-c@company-c.com', 'C社担当者', 'client', NULL, 'c3333333-3333-3333-3333-333333333333', now(), now());

-- ============================================================================
-- 4. tasks（タスク）
-- ============================================================================

INSERT INTO tasks (id, org_id, client_id, title, description, status, assignee_id, due_date, post_date, created_at, updated_at, last_activity_at) VALUES
-- Client A
('t1111111-1111-1111-1111-111111111111', '01234567-89ab-cdef-0123-456789abcdef', 'c1111111-1111-1111-1111-111111111111', 'LP デザイン修正', 'トップページのデザイン修正依頼', 'in_progress', 'u3333333-3333-3333-3333-333333333333', '2024-12-30', '2024-12-20', now() - interval '3 days', now() - interval '1 day', now() - interval '1 day'),
('t1111111-2222-2222-2222-222222222222', '01234567-89ab-cdef-0123-456789abcdef', 'c1111111-1111-1111-1111-111111111111', 'バナー広告作成', 'キャンペーンバナー作成', 'not_started', 'u4444444-4444-4444-4444-444444444444', '2024-12-28', '2024-12-22', now() - interval '1 day', now() - interval '1 day', now() - interval '1 day'),
-- Client B
('t2222222-1111-1111-1111-111111111111', '01234567-89ab-cdef-0123-456789abcdef', 'c2222222-2222-2222-2222-222222222222', 'SNS投稿スケジュール調整', '12月のSNS投稿スケジュール確定', 'completed', 'u1111111-1111-1111-1111-111111111111', '2024-12-20', '2024-12-15', now() - interval '7 days', now() - interval '2 days', now() - interval '2 days'),
-- Client C
('t3333333-1111-1111-1111-111111111111', '01234567-89ab-cdef-0123-456789abcdef', 'c3333333-3333-3333-3333-333333333333', '動画編集', 'プロモーション動画の編集', 'in_progress', 'u4444444-4444-4444-4444-444444444444', '2024-12-25', '2024-12-18', now() - interval '5 days', now(), now());

-- ============================================================================
-- 5. approvals（承認）
-- ============================================================================

INSERT INTO approvals (id, org_id, client_id, title, description, status, submitter_id, approver_id, due_date, created_at, updated_at) VALUES
-- Client A
('a1111111-1111-1111-1111-111111111111', '01234567-89ab-cdef-0123-456789abcdef', 'c1111111-1111-1111-1111-111111111111', 'LP デザイン最終承認', 'LPデザインの最終確認・承認依頼', 'pending', 'u1111111-1111-1111-1111-111111111111', 'u2222222-2222-2222-2222-222222222222', '2024-12-24', now() - interval '2 days', now() - interval '2 days'),
-- Client B
('a2222222-1111-1111-1111-111111111111', '01234567-89ab-cdef-0123-456789abcdef', 'c2222222-2222-2222-2222-222222222222', 'SNS投稿内容承認', '12月SNS投稿内容の承認', 'approved', 'u1111111-1111-1111-1111-111111111111', 'u2222222-2222-2222-2222-222222222222', '2024-12-18', now() - interval '5 days', now() - interval '3 days'),
-- Client C
('a3333333-1111-1111-1111-111111111111', '01234567-89ab-cdef-0123-456789abcdef', 'c3333333-3333-3333-3333-333333333333', '動画コンテ承認', 'プロモーション動画のコンテ承認', 'rejected', 'u4444444-4444-4444-4444-444444444444', 'u2222222-2222-2222-2222-222222222222', '2024-12-20', now() - interval '4 days', now() - interval '2 days');

-- 承認済みデータの日時設定
UPDATE approvals SET approved_at = now() - interval '3 days' WHERE id = 'a2222222-1111-1111-1111-111111111111';
UPDATE approvals SET rejected_at = now() - interval '2 days', rejection_reason = '一部修正が必要です' WHERE id = 'a3333333-1111-1111-1111-111111111111';

-- ============================================================================
-- 6. comments（コメント）
-- ============================================================================

INSERT INTO comments (id, org_id, client_id, content, author_id, task_id, approval_id, direction, is_from_client, created_at) VALUES
-- Task t1111111-1111-1111-1111-111111111111 へのコメント
('cm111111-1111-1111-1111-111111111111', '01234567-89ab-cdef-0123-456789abcdef', 'c1111111-1111-1111-1111-111111111111', '修正内容を確認したいです', 'u7777777-7777-7777-7777-777777777777', 't1111111-1111-1111-1111-111111111111', NULL, 'client_to_team', true, now() - interval '6 hours'),
('cm111111-2222-2222-2222-222222222222', '01234567-89ab-cdef-0123-456789abcdef', 'c1111111-1111-1111-1111-111111111111', 'はい、修正内容を共有いたします', 'u3333333-3333-3333-3333-333333333333', 't1111111-1111-1111-1111-111111111111', NULL, 'team_to_client', false, now() - interval '4 hours'),
-- Task t3333333-1111-1111-1111-111111111111 へのコメント
('cm333333-1111-1111-1111-111111111111', '01234567-89ab-cdef-0123-456789abcdef', 'c3333333-3333-3333-3333-333333333333', 'BGMの選定をお願いします', 'u2222222-2222-2222-2222-222222222222', 't3333333-1111-1111-1111-111111111111', NULL, 'team_to_client', false, now() - interval '2 hours'),
-- Approval a1111111-1111-1111-1111-111111111111 へのコメント
('cm111111-3333-3333-3333-333333333333', '01234567-89ab-cdef-0123-456789abcdef', 'c1111111-1111-1111-1111-111111111111', 'デザインの方向性は良いと思います', 'u2222222-2222-2222-2222-222222222222', NULL, 'a1111111-1111-1111-1111-111111111111', 'team_to_client', false, now() - interval '1 day');

-- ============================================================================
-- 7. contracts（契約）
-- ============================================================================

INSERT INTO contracts (id, org_id, client_id, name, status, monthly_fee, start_date, end_date, renewal_date, created_at, updated_at) VALUES
-- Client A
('co111111-1111-1111-1111-111111111111', '01234567-89ab-cdef-0123-456789abcdef', 'c1111111-1111-1111-1111-111111111111', 'SNS運用代行（基本プラン）', 'active', 500000, '2024-01-01', '2024-12-31', '2024-11-30', now() - interval '30 days', now() - interval '30 days'),
-- Client B
('co222222-1111-1111-1111-111111111111', '01234567-89ab-cdef-0123-456789abcdef', 'c2222222-2222-2222-2222-222222222222', 'コンテンツ制作（プレミアム）', 'active', 1200000, '2024-03-01', '2025-02-28', '2025-01-31', now() - interval '60 days', now() - interval '60 days'),
-- Client C
('co333333-1111-1111-1111-111111111111', '01234567-89ab-cdef-0123-456789abcdef', 'c3333333-3333-3333-3333-333333333333', '広告運用代行', 'negotiation', 800000, NULL, NULL, NULL, now() - interval '10 days', now() - interval '10 days'),
-- Client D
('co444444-1111-1111-1111-111111111111', '01234567-89ab-cdef-0123-456789abcdef', 'c4444444-4444-4444-4444-444444444444', 'ブランディング支援', 'active', 600000, '2024-06-01', '2025-05-31', '2025-04-30', now() - interval '90 days', now() - interval '90 days');

-- ============================================================================
-- 8. notifications（通知）
-- ============================================================================

INSERT INTO notifications (id, org_id, user_id, type, title, message, read, related_client_id, related_item_id, related_item_type, created_at) VALUES
-- Sales（営業太郎）宛
('n1111111-1111-1111-1111-111111111111', '01234567-89ab-cdef-0123-456789abcdef', 'u1111111-1111-1111-1111-111111111111', 'task_due', 'タスク期限間近', 'タスク「バナー広告作成」の期限が3日後です', false, 'c1111111-1111-1111-1111-111111111111', 't1111111-2222-2222-2222-222222222222', 'task', now() - interval '2 hours'),
-- Direction（ディレクション花子）宛
('n2222222-1111-1111-1111-111111111111', '01234567-89ab-cdef-0123-456789abcdef', 'u2222222-2222-2222-2222-222222222222', 'approval_due', '承認期限間近', '承認「LP デザイン最終承認」の期限が2日後です', false, 'c1111111-1111-1111-1111-111111111111', 'a1111111-1111-1111-1111-111111111111', 'approval', now() - interval '4 hours'),
('n2222222-2222-2222-2222-222222222222', '01234567-89ab-cdef-0123-456789abcdef', 'u2222222-2222-2222-2222-222222222222', 'comment', 'コメントが投稿されました', 'タスク「LP デザイン修正」に新しいコメントがあります', true, 'c1111111-1111-1111-1111-111111111111', 'cm111111-1111-1111-1111-111111111111', 'comment', now() - interval '6 hours'),
-- Editor（エディター次郎）宛
('n3333333-1111-1111-1111-111111111111', '01234567-89ab-cdef-0123-456789abcdef', 'u3333333-3333-3333-3333-333333333333', 'comment', 'コメントが投稿されました', 'タスク「LP デザイン修正」に新しいコメントがあります', false, 'c1111111-1111-1111-1111-111111111111', 'cm111111-1111-1111-1111-111111111111', 'comment', now() - interval '6 hours'),
-- Client A担当者宛
('n7777777-1111-1111-1111-111111111111', '01234567-89ab-cdef-0123-456789abcdef', 'u7777777-7777-7777-7777-777777777777', 'comment', 'コメントが投稿されました', 'タスク「LP デザイン修正」に返信がありました', false, 'c1111111-1111-1111-1111-111111111111', 'cm111111-2222-2222-2222-222222222222', 'comment', now() - interval '4 hours');

-- ============================================================================
-- End of seed_minimal.sql
-- ============================================================================
